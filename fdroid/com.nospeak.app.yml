Categories:
  - Internet
  - Messaging
License: GPL-3.0-or-later
AuthorName: psic4t
WebSite: https://nospeak.chat
SourceCode: https://github.com/psic4t/nospeak
IssueTracker: https://github.com/psic4t/nospeak/issues

AutoName: nospeak

RepoType: git
Repo: https://github.com/psic4t/nospeak.git

Builds:
  - versionName: v0.9.16.1
    versionCode: 90161
    commit: v0.9.16.1
    subdir: android/app
    sudo:
      - echo "deb https://deb.debian.org/debian trixie main" > /etc/apt/sources.list.d/trixie.list
      - apt-get update
      - apt-get install -y -t trixie openjdk-21-jdk-headless npm
      - update-alternatives --auto java
    init: npm ci
    gradle:
      - yes
    prebuild:
      - cd .. && npm run build:android
      - echo "sdk.dir=$$SDK$$" > local.properties
    scandelete:
      - node_modules/nostr-wasm
      - node_modules/source-map/lib/mappings.wasm
      - node_modules/@capacitor/cli/assets
      - node_modules/esbuild
      - node_modules/@esbuild
      - node_modules/svelte-i18n/node_modules/esbuild
      - node_modules/svelte-i18n/node_modules/@esbuild

AutoUpdateMode: Version
UpdateCheckMode: Tags ^v?(0\.9\.(16\.[1-9]\d*|(1[7-9]|[2-9]\d)(\.\d+)?)$|[1-9]\d*\.\d+\.\d+.*)$
UpdateCheckData: package.json|"versionCode":\s*(\d+)|package.json|"version":\s*"([\d.]+)"
CurrentVersion: 0.9.16.1
CurrentVersionCode: 90161
